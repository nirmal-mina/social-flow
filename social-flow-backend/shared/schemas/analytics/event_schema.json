{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://socialflow.com/schemas/analytics/event_schema.json",
  "title": "AnalyticsEvent",
  "description": "Base schema for all analytics events (page views, video views, clicks, likes, shares, etc.)",
  "type": "object",
  "required": ["event_id", "event_type", "user_id", "timestamp", "context"],
  "properties": {
    "event_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the event"
    },
    "event_type": {
      "type": "string",
      "enum": ["view", "click", "like", "share", "comment", "subscribe", "purchase", "ad_impression", "ad_click"],
      "description": "Type of the analytics event"
    },
    "user_id": {
      "type": "string",
      "description": "Unique ID of the user who triggered the event"
    },
    "content_id": {
      "type": "string",
      "description": "ID of the content (post, video, ad, etc.) the event relates to"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "UTC timestamp when the event occurred"
    },
    "context": {
      "type": "object",
      "description": "Contextual metadata about the event",
      "properties": {
        "device": { "type": "string", "description": "Device type (mobile, desktop, tablet)" },
        "os": { "type": "string", "description": "Operating system" },
        "browser": { "type": "string", "description": "Browser name/version" },
        "geo": {
          "type": "object",
          "properties": {
            "country": { "type": "string" },
            "region": { "type": "string" },
            "city": { "type": "string" },
            "ip": { "type": "string", "format": "ipv4" }
          },
          "required": ["country"]
        }
      },
      "required": ["device", "os", "browser"]
    },
    "metadata": {
      "type": "object",
      "description": "Optional extra metadata (A/B test ID, campaign ID, etc.)",
      "additionalProperties": true
    }
  }
}
