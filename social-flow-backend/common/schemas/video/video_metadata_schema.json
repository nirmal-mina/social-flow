{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://socialflow.com/schemas/video/video_metadata_schema.json",
  "title": "VideoMetadata",
  "description": "Canonical metadata for a video object used by ingestion, catalog, search and UI layers.",
  "type": "object",
  "required": ["video_id", "uploader_id", "title", "created_at", "visibility", "duration_seconds"],
  "additionalProperties": false,
  "properties": {
    "video_id": { "type": "string", "format": "uuid", "description": "Stable unique video identifier." },
    "uploader_id": { "type": "string", "format": "uuid", "description": "User or system who uploaded the video." },
    "title": { "type": "string", "maxLength": 300 },
    "description": { "type": "string", "maxLength": 5000 },
    "language": { "type": ["string", "null"], "description": "ISO 639-1 or BCP-47 language code." },
    "tags": { "type": "array", "items": { "type": "string" }, "default": [] },
    "categories": { "type": "array", "items": { "type": "string" }, "default": [] },
    "duration_seconds": { "type": "number", "minimum": 0 },
    "created_at": { "type": "string", "format": "date-time" },
    "published_at": { "type": ["string", "null"], "format": "date-time" },
    "visibility": { "type": "string", "enum": ["public", "unlisted", "private", "scheduled"], "default": "public" },
    "scheduled_publish_time": { "type": ["string", "null"], "format": "date-time" },
    "license": { "type": "string", "description": "License id or text (e.g., CC-BY, standard)", "default": "standard" },
    "original_filename": { "type": ["string", "null"] },
    "language_hint": { "type": ["string", "null"], "description": "Optional hint for auto-captioning systems." },
    "thumbnail_id": { "type": ["string", "null"], "description": "Primary thumbnail identifier referencing thumbnail_schema." },
    "is_age_restricted": { "type": "boolean", "default": false },
    "content_warnings": { "type": "array", "items": { "type": "string" }, "default": [] },
    "metadata": { "type": "object", "description": "Freeform metadata for services (analytics tags, campaign id)", "additionalProperties": true },
    "processing_state": { "type": "string", "enum": ["uploaded", "processing", "ready", "failed", "deleted"], "default": "uploaded" },
    "duration_human": { "type": ["string", "null"], "description": "Preformatted duration (e.g., 1:23:45) for UI convenience." }
  }
}
