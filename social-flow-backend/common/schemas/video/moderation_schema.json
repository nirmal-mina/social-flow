{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://socialflow.com/schemas/video/moderation_schema.json",
  "title": "VideoModeration",
  "description": "Moderation verdicts, signals and evidence for video content. Designed for policy engines and human reviewer UIs.",
  "type": "object",
  "required": ["moderation_id", "video_id", "evaluated_at", "source", "verdict"],
  "additionalProperties": false,
  "properties": {
    "moderation_id": { "type": "string", "format": "uuid" },
    "video_id": { "type": "string", "format": "uuid" },
    "evaluated_at": { "type": "string", "format": "date-time" },
    "source": { "type": "string", "enum": ["automated", "human", "third_party"], "description": "Origin of moderation." },
    "verdict": { "type": "string", "enum": ["pass", "flagged", "age_restricted", "remove", "review"], "description": "Outcome from moderation." },
    "scores": {
      "type": "object",
      "description": "Per-model scores (nsfw, violence, hate, sexual, self-harm).",
      "additionalProperties": { "type": "number", "minimum": 0, "maximum": 1 }
    },
    "reasons": { "type": "array", "items": { "type": "string" }, "description": "List of policy reasons or rule ids." },
    "evidence": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "type": { "type": "string", "enum": ["thumbnail", "clip", "transcript", "metadata"] },
          "reference": { "type": "string", "description": "URI/asset id referencing evidence." },
          "excerpt": { "type": "string", "description": "Short textual excerpt or time-range (e.g., 00:01:23-00:01:45)." }
        },
        "required": ["type", "reference"],
        "additionalProperties": false
      }
    },
    "reviewer": { "type": ["string", "null"], "description": "user_id of human reviewer if applicable." },
    "review_notes": { "type": ["string", "null"] },
    "actioned_at": { "type": ["string", "null"], "format": "date-time" },
    "actioned_by": { "type": ["string", "null"], "description": "User/system who applied action." }
  }
}
