"""
Types for subscription & billing domain (not GraphQL Subscriptions).
Covers plans, subscriptions, invoices and payment receipts.
"""

type SubscriptionPlan {
  id: ID!
  name: String!
  description: String
  price: Float!
  currency: String!
  interval: BillingInterval!
  trialDays: Int
  features: [String!]
  active: Boolean!
  metadata: JSON
}

type Subscription {
  id: ID!
  userId: ID!
  plan: SubscriptionPlan!
  status: SubscriptionStatus!
  startedAt: DateTime!
  trialExpiresAt: DateTime
  nextBillingAt: DateTime
  expiresAt: DateTime
  autoRenew: Boolean
  metadata: JSON
}

type Invoice {
  id: ID!
  userId: ID!
  subscriptionId: ID
  amount: Float!
  currency: String!
  issuedAt: DateTime!
  dueAt: DateTime
  paidAt: DateTime
  status: PaymentStatus!
  lineItems: [InvoiceLineItem!]!
  metadata: JSON
}

type InvoiceLineItem {
  description: String!
  quantity: Int!
  unitPrice: Float!
  total: Float!
  metadata: JSON
}

type PaymentReceipt {
  transactionId: String!
  userId: ID!
  amount: Float!
  currency: String!
  status: PaymentStatus!
  processedAt: DateTime!
  metadata: JSON
}
